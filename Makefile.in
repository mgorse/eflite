# -*- makefile -*-
#
# This file is automatically generated by configure.
# Do not hand edit.

CC       = @CC@
CFLAGS   = @CFLAGS@
CPPFLAGS = @CPPFLAGS@
DEFS     = @DEFS@
LIBS = @LIBS@

AUDIOLIBS   = @AUDIOLIBS@

FL_LANG  = @FL_LANG@
FL_VOX   = @FL_VOX@
FL_LEX   = @FL_LEX@

exec_prefix   = @exec_prefix@
prefix        = @prefix@
EXEEXT	      = @EXEEXT@
INSTALLBINDIR = @bindir@
INSTALLLIBDIR = @libdir@
INSTALLINCDIR = @includedir@/flite
flite_dir:=@flite_dir@

#CFLAGS+= -DDEBUG=2

# For making releases
FLITE_LIBS:=$(flite_dir)/lib/libflite_$(FL_VOX).a $(flite_dir)/lib/libflite_$(FL_LEX).a $(flite_dir)/lib/libflite_$(FL_LANG).a $(flite_dir)/lib/libflite.a

eflite: fs.o es.o soccon.o sockopen.o tone.o $(FLITE_LIBS)
	$(CC) $(LDFLAGS) -o $@ $^ -lpthread -lm $(LIBS)

fs.o: fs.c
	$(CC) $(CFLAGS) -I. -I$(flite_dir)/include -DREGISTER_VOX=register_$(FL_VOX) -DSTANDALONE -DEFLITE -c -o $@ $<

tone.o: tone.c
	$(CC) $(CFLAGS) -I$(flite_dir)/include -DEFLITE -c -o $@ $<

DISTFILES=es.c fs.c soccon.c sockopen.c tone.c es.h language.h lookup.h synthesizer.h configure configure.in Makefile.in COPYING ChangeLog INSTALL README eflite_test.txt
release:
	mkdir ../eflite-$(EFLITE_VERSION) && cp $(DISTFILES) ../eflite-$(EFLITE_VERSION) && tar -C.. -czf eflite-$(EFLITE_VERSION).tar.gz $(addprefix eflite-$(EFLITE_VERSION)/,$(DISTFILES)) && rm -r ../eflite-$(EFLITE_VERSION)

DIRFILES:=$(filter-out $(DISTFILES),$(wildcard *))
pristine:
ifneq (,$(DIRFILES))
	rm $(DIRFILES)
endif

clean:
ifneq (,$(wildcard *.o))
	rm *.o
endif

install: eflite
	install -c -m 0755 $< $(exec_prefix)/bin

test: eflite
	./eflite -f eflite_test.txt
